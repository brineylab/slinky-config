[sssd]
services = nss, pam, ssh
domains = cluster.local
config_file_version = 2

[domain/cluster.local]
id_provider = ldap
auth_provider = ldap

# lldap in-cluster DNS
ldap_uri = ldap://lldap.lldap.svc.cluster.local:3890
ldap_search_base = dc=cluster,dc=local

# Read-only bind user for SSSD (create this in lldap UI, see secrets/README.md)
ldap_default_bind_dn = uid=sssd,ou=people,dc=cluster,dc=local
ldap_default_authtok_type = password
ldap_default_authtok = Nv1d14gpu5

# lldap schema
ldap_user_object_class = person
ldap_user_name = uid
ldap_user_uid_number = uidNumber
ldap_user_gid_number = gidNumber
ldap_user_home_directory = homeDirectory
ldap_user_shell = loginShell
ldap_group_object_class = groupOfUniqueNames
ldap_group_member = uniqueMember

# SSH public key lookups (optional but nice)
ldap_user_ssh_public_key = sshPublicKey

ldap_tls_reqcert = never
cache_credentials = true
enumerate = true

# How quickly new users appear without a cache flush (5 min default)
entry_cache_timeout = 300